<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="g_events_style.css">


    <!--Importing icons-->
    <script src="https://kit.fontawesome.com/d668823cf8.js" crossorigin="anonymous"></script>

    <!--Importing fonts-->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond&family=Gideon+Roman&family=Montserrat:wght@500&family=Newsreader:opsz,wght@6..72,200;6..72,300;6..72,400&family=Poppins:wght@300;600&family=Varela&display=swap&family=Vollkorn&display=swap&family=Quattrocento+Sans:wght@700&family=Noto+Serif:wght@300;400');
    </style>

    <title>Book Event</title>
</head>

<body style="display: flex;">

    <!-- NAV BAR -->
    <nav class="topnav">
        <link href="../Nav&Footer/navbar.css" rel="css stylesheet">
        <script src="../Nav&Footer/nav.js"></script>

        <div class="navigation">

            <!-- hidden nav menu -->
            <div class="nav-menu">
                <ul>
                    <li><a href="../Sarah_Home&FeedbackPages/home_page.html">Home</a></li>
                    <li><a href="../Jovy_RoomsPage/roomsContent.html">Stay</a></li>
                    <li><a href="../Tia_AmmenitiesPage/AmentitiesPage_Tia.html">Amenities</a></li>
                    <li><a href="../Titus_DiningPage/homepage.html">Dining</a></li>
                    <li><a href="../Gabrial_EventsPage/g_events.html">Events</a></li>
                    <li><a href="../Sarah_Home&FeedbackPages/feedback_form.html">Contact Us</a></li>
                </ul>
            </div>

        </div>

        <!-- spanning across the whole nav - contains logo and book now button -->
        <div class="nav-content">

            <!-- menu button -->
            <button class="hamburger" onclick="show()">
                <div id="bar1" class="bar"></div>
                <div id="bar2" class="bar"></div>
                <div id="bar3" class="bar"></div>
            </button>

            <a href="../Sarah_Home&FeedbackPages/home_page.html" class="hotel-logo"><img src="../Nav&Footer/logo.png"
                    alt=""></a>

            <a href="../Jovy_RoomsPage/roomsContent.html" class="booknow-btn">Book Now</a>

        </div>

    </nav>




    <div class="main-section">
        <div style="display: flex;">
            <div class="video-container">

                <div class="video-background">
                    <video autoplay muted loop id="bgVideo">
                        <source src="bg-video.mp4" type="video/mp4">
                    </video>
                </div>

            </div>


            <div class="s-content">
                <div>
                    <div class="w3-row">
                        <div class="w3-col l7 m12 w3-center">
                            <div class="w3-container wholeform" id="form-container">

                                <h2 class="w3-center">Book Event</h2>


                                <form id="eventForm" class="w3-container">

                                    <label class="w3-left-align">Select Event:</label>
                                    <select id="selected-event" name="event" class="w3-select w3-border" required>
                                        <option value="" disabled selected>Choose an event</option>
                                        <option value="Weddings">Weddings</option>
                                        <option value="Savor & Explore">Savor & Explore</option>
                                        <option value="Meetings">Meetings</option>
                                        <option value="Vino Elegante: A Journey Through Exquisite Wines">Vino Elegante:
                                            A Journey
                                            Through Exquisite Wines</option>
                                    </select>

                                    <label class="w3-left-align" required>Booking Date:</label required>
                                    <input id="booking-date" min="" type="date" name="bookingDate"
                                        class="w3-input w3-border" required>

                                    <label class="w3-left-align">Name:</label>
                                    <input type="text" name="name" class="w3-input w3-border" required>

                                    <label class="w3-left-align">Email:</label>
                                    <input type="email" name="email" class="w3-input w3-border" required>

                                    <label class="w3-left-align">Mobile Number:</label>
                                    <input type="tel" name="mobileNumber" class="w3-input w3-border" required>

                                    <label class="w3-left-align">Number of Guests:</label>
                                    <input type="number" name="guests" class="w3-input w3-border" required>

                                    <label class="w3-left-align">Comments:</label>
                                    <textarea name="comments" class="w3-input w3-border" rows="4"></textarea>

                                    <button type="button" onclick="navigateToConfirmationPage()" class="w3-margin-top"
                                        id="generatebutton">Book Now</button>

                                </form>
                            </div>
                        </div>
                        <div class="w3-col l5 m12">
                            <div class="bookinng-text">
                                <div>
                                    <h1>Book Now</h1>
                                    <p>Discover unforgettable experiences and secure your spot today with our
                                        easy-to-use 'Book Now'
                                        feature. Whether it's a dream wedding, a delightful culinary journey, a
                                        productive business
                                        meeting, or an elegant wine tasting event, we've got you covered. Don't miss out
                                        on the
                                        chance
                                        to create cherished memories with your loved ones. Click 'Book Now' and embark
                                        on a journey
                                        of
                                        excitement and celebration!</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>


            </div>
        </div>


        <footer id="footer">
            <link href="../Nav&Footer/footer.css" rel="css stylesheet">

            <!-- section 1 -->
            <div class="footer-content">
                <img src="../Nav&Footer/logo.png" alt="">

                <p>123 Address Road, Singapore 123456</p>

            </div>

            <!-- section 2 -->
            <div class="footer-content">
                <h4>Contact Us</h4>
                <ul>
                    <li><a href="../Sarah_Home&FeedbackPages/feedback_form.html">Contact Us</a></li>
                    <li><a href="../Sarah_Home&FeedbackPages/home_page.html#Location">Location</a></li>
                    <li><a href="#">Gallery</a></li>
                </ul>

                <div class="icons">
                    <a href="#"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-whatsapp"></i></a>
                </div>
            </div>

            <!-- section 3 -->
            <div class="footer-content">
                <h4>Resources</h4>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="../Sarah_Home&FeedbackPages/home_page.html#testimonials">Testimonials</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>

            <!-- section 4 -->
            <div class="footer-content">
                <h4>About Us</h4>
                <ul>
                    <li><a href="../Sarah_Home&FeedbackPages/home_page.html#about-us">About Us</a></li>
                    <li><a href="#">Sustainability</a></li>
                    <li><a href="#">Awards & Recognition</a></li>
                    <li><a href="#">Virtual Tour</a></li>
                </ul>
            </div>

        </footer>




        <!-- Booking Confirmation Popup -->
        <div id="confirmationPopup" class="confirmation-popup">
            <div class="confirmation-content">
                <span class="close-btn" onclick="closeConfirmationPopup()">&times;</span>
                <h2>Booking Confirmed!</h2>
                <p>Thank you for booking the event. Your reservation has been confirmed.</p>
                <p>We look forward to seeing you at the event!</p>
            </div>
        </div>


    </div>

</body>

<script>

    // when the page is loaded (which happens when the reserve btn is pressed in the content page)
    window.addEventListener('DOMContentLoaded', function () {
        document.getElementById('selected-event').value = localStorage.getItem('event');

        // set it so you are unable to select date before current date
        document.getElementById('booking-date').min = new Date().toISOString().split('T')[0];
    })









    // Function to validate email
    function showConfirmationPopup() {
        const popup = document.getElementById('confirmationPopup');
        popup.style.display = 'block';
    }

    function closeConfirmationPopup() {
        const popup = document.getElementById('confirmationPopup');
        popup.style.display = 'none';
        window.location.href = '../Sarah_Home&FeedbackPages/home_page.html';
    }



    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    // Function to validate mobile number format
    function validateMobileNumber(mobileNumber) {
        const mobileRegex = /^\d{8}$/;
        return mobileRegex.test(mobileNumber);
    }
    function generatePDF() {
        const event = document.querySelector('[name="event"]').value;
        const bookingDate = document.querySelector('[name="bookingDate"]').value;
        const name = document.querySelector('[name="name"]').value;
        const email = document.querySelector('[name="email"]').value;
        const mobileNumber = document.querySelector('[name="mobileNumber"]').value;
        const guests = parseInt(document.querySelector('[name="guests"]').value);
        const comments = document.querySelector('[name="comments"]').value;

        // Check if the required fields are filled
        if (!event || !bookingDate || !name || !email || !mobileNumber || isNaN(guests) || guests < 0) {
            alert("Please fill all required fields with valid data before generating the PDF.");
            return;
        }

        // Define the content for the PDF
        const pdfContent = [
            { text: 'Event Details', style: 'header' },
            { text: `Event: ${event}`, style: 'content' },
            { text: `Booking Date: ${bookingDate}`, style: 'content' },
            { text: `Name: ${name}`, style: 'content' },
            { text: `Email: ${email}`, style: 'content' },
            { text: `Mobile Number: ${mobileNumber}`, style: 'content' },
            { text: `Number of Guests: ${guests}`, style: 'content' },
            { text: `Comments: ${comments}`, style: 'content' }
        ];

        // Define the PDF document definition
        const docDefinition = {
            content: pdfContent,
            styles: {
                header: { fontSize: 18, bold: true, margin: [0, 10, 0, 5] },
                content: { fontSize: 14, margin: [0, 0, 0, 5] }
            }
        };

        // Generate the PDF and download it
        pdfMake.createPdf(docDefinition).download("Event_Booking_Details.pdf");
    }


    function navigateToConfirmationPage() {
        // Validate form data
        const event = document.querySelector('[name="event"]').value;
        const bookingDate = document.querySelector('[name="bookingDate"]').value;
        const name = document.querySelector('[name="name"]').value;
        const email = document.querySelector('[name="email"]').value;
        const mobileNumber = document.querySelector('[name="mobileNumber"]').value;
        const guests = parseInt(document.querySelector('[name="guests"]').value);
        const comments = document.querySelector('[name="comments"]').value;

        // Validate event selection
        if (event === "") {
            alert("Please choose an event.");
            return;
        }

        if (bookingDate === "") {
            alert("Please enter the date of the event.");
            return;
        }

        // Validate name field
        if (name === "") {
            alert("Please enter your name.");
            return;
        }

        // Validate email field
        if (email === "") {
            alert("Please enter your email.");
            return;
        }

        // Validate email format
        if (!validateEmail(email)) {
            alert("Please enter a valid email address.");
            return;
        }

        // Validate mobile number field
        if (!validateMobileNumber(mobileNumber)) {
            alert("Please enter a valid 8-digit mobile number.");
            return;
        }

        // Validate guests field
        if (isNaN(guests) || guests <= 0) {
            alert("Please enter a valid number of guests.");
            return;
        }

        // Ensure guests is not negative
        if (guests < 0) {
            alert("Number of guests cannot be negative.");
            return;
        }
        // localStorage.setItem('bookingData', JSON.stringify(bookingData));

        // Show the confirmation popup
        showConfirmationPopup();
        generatePDF();


        // Open the confirmation page in a new tab
        window.open('../confirmation_page/bk_confirmation.html', '_blank');
    }
</script>

</html>
